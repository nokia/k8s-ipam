---
apiVersion: apiextensions.k8s.io/v1
kind: CustomResourceDefinition
metadata:
  annotations:
    controller-gen.kubebuilder.io/version: v0.9.2
  creationTimestamp: null
  name: ipallocations.ipam.alloc.nephio.org
spec:
  group: ipam.alloc.nephio.org
  names:
    categories:
    - nephio
    - ipam
    kind: IPAllocation
    listKind: IPAllocationList
    plural: ipallocations
    singular: ipallocation
  scope: Namespaced
  versions:
  - additionalPrinterColumns:
    - jsonPath: .status.conditions[?(@.kind=='Synced')].status
      name: SYNC
      type: string
    - jsonPath: .status.conditions[?(@.kind=='Ready')].status
      name: STATUS
      type: string
    - jsonPath: .spec.networkInstance
      name: NETWORK-INSTANCE
      type: string
    - jsonPath: .spec.kind
      name: KIND
      type: string
    - jsonPath: .spec.addressFamily
      name: AF
      type: string
    - jsonPath: .spec.prefixLength
      name: PREFIXLENGTH
      type: string
    - jsonPath: .spec.prefix
      name: PREFIX-REQ
      type: string
    - jsonPath: .status.prefix
      name: PREFIX-ALLOC
      type: string
    - jsonPath: .status.gateway
      name: GATEWAY
      type: string
    - jsonPath: .metadata.creationTimestamp
      name: AGE
      type: date
    name: v1alpha1
    schema:
      openAPIV3Schema:
        description: IPAllocation is the Schema for the ipallocations API
        properties:
          apiVersion:
            description: 'APIVersion defines the versioned schema of this representation
              of an object. Servers should convert recognized schemas to the latest
              internal value, and may reject unrecognized values. More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#resources'
            type: string
          kind:
            description: 'Kind is a string value representing the REST resource this
              object represents. Servers may infer this from the endpoint the client
              submits requests to. Cannot be updated. In CamelCase. More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#types-kinds'
            type: string
          metadata:
            type: object
          spec:
            description: IPAllocationSpec defines the desired state of IPAllocation
            properties:
              addressFamily:
                description: AddressFamily defines the address family this prefix
                enum:
                - ipv4
                - ipv6
                type: string
              createPrefix:
                description: CreatePrefix defines if this prefix must be created.
                  Allows to specify a
                type: boolean
              index:
                description: index defines the index in order for the backend to allocate
                  a dedicated index in the prefix. Used for deterministic prefix allocation
                format: int32
                type: integer
              kind:
                default: network
                description: PrefixKind defines the kind of prefix we want to allocate
                  network kind is used for physical, virtual nics on a device loopback
                  kind is used for loopback interfaces pool kind is used for pools
                  for dhcp/radius/bng/upf/etc aggregate kind is used for allocating
                  an aggregate prefix
                enum:
                - network
                - loopback
                - pool
                - aggregate
                type: string
              labels:
                additionalProperties:
                  type: string
                description: Labels define metadata to the object (aka. user defined
                  labels). They are part of the spec since the allocation selector
                  will use these labels for allocation more specific prefixes/addresses
                  within this prefix As such we distinguish clearly between the metadata
                  labels and the user defined labels in the spec
                type: object
              networkInstanceReference:
                description: NetworkInstance defines the networkInstance context used
                  to allocate this prefix Name and optionally Namespace is used here
                properties:
                  apiVersion:
                    description: API version of the referent.
                    type: string
                  fieldPath:
                    description: 'If referring to a piece of an object instead of
                      an entire object, this string should contain a valid JSON/Go
                      field access statement, such as desiredState.manifest.containers[2].
                      For example, if the object reference is to a container within
                      a pod, this would take on a value like: "spec.containers{name}"
                      (where "name" refers to the name of the container that triggered
                      the event) or if no container name is specified "spec.containers[2]"
                      (container with index 2 in this pod). This syntax is chosen
                      only to have some well-defined way of referencing a part of
                      an object. TODO: this design is not final and this field is
                      subject to change in the future.'
                    type: string
                  kind:
                    description: 'Kind of the referent. More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#types-kinds'
                    type: string
                  name:
                    description: 'Name of the referent. More info: https://kubernetes.io/docs/concepts/overview/working-with-objects/names/#names'
                    type: string
                  namespace:
                    description: 'Namespace of the referent. More info: https://kubernetes.io/docs/concepts/overview/working-with-objects/namespaces/'
                    type: string
                  resourceVersion:
                    description: 'Specific resourceVersion to which this reference
                      is made, if any. More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#concurrency-control-and-consistency'
                    type: string
                  uid:
                    description: 'UID of the referent. More info: https://kubernetes.io/docs/concepts/overview/working-with-objects/names/#uids'
                    type: string
                type: object
                x-kubernetes-map-type: atomic
              prefix:
                description: Prefix allows the client to define the prefix they want
                  to be allocated Used for specific prefix allocation or used as a
                  hint for a dynamic prefix allocation in case of restart
                pattern: (([0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])\.){3}([0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])/(([0-9])|([1-2][0-9])|(3[0-2]))|((:|[0-9a-fA-F]{0,4}):)([0-9a-fA-F]{0,4}:){0,5}((([0-9a-fA-F]{0,4}:)?(:|[0-9a-fA-F]{0,4}))|(((25[0-5]|2[0-4][0-9]|[01]?[0-9]?[0-9])\.){3}(25[0-5]|2[0-4][0-9]|[01]?[0-9]?[0-9])))(/(([0-9])|([0-9]{2})|(1[0-1][0-9])|(12[0-8])))
                type: string
              prefixLength:
                description: PrefixLength allows to client to indicate the prefixLength
                  it wants for the allocation Used typically to indicate the size
                  a certain prefix If not supplied we use assume /32 for ipv4 and
                  /128 for ipv6
                type: integer
              selector:
                description: Selector defines the selector criterias by whihc this
                  prefix should be allocated
                properties:
                  matchExpressions:
                    description: matchExpressions is a list of label selector requirements.
                      The requirements are ANDed.
                    items:
                      description: A label selector requirement is a selector that
                        contains values, a key, and an operator that relates the key
                        and values.
                      properties:
                        key:
                          description: key is the label key that the selector applies
                            to.
                          type: string
                        operator:
                          description: operator represents a key's relationship to
                            a set of values. Valid operators are In, NotIn, Exists
                            and DoesNotExist.
                          type: string
                        values:
                          description: values is an array of string values. If the
                            operator is In or NotIn, the values array must be non-empty.
                            If the operator is Exists or DoesNotExist, the values
                            array must be empty. This array is replaced during a strategic
                            merge patch.
                          items:
                            type: string
                          type: array
                      required:
                      - key
                      - operator
                      type: object
                    type: array
                  matchLabels:
                    additionalProperties:
                      type: string
                    description: matchLabels is a map of {key,value} pairs. A single
                      {key,value} in the matchLabels map is equivalent to an element
                      of matchExpressions, whose key field is "key", the operator
                      is "In", and the values array contains only "value". The requirements
                      are ANDed.
                    type: object
                type: object
                x-kubernetes-map-type: atomic
            required:
            - kind
            - networkInstanceReference
            type: object
          status:
            description: IPAllocationStatus defines the observed state of IPAllocation
            properties:
              conditions:
                description: Conditions of the resource.
                items:
                  description: A Condition that may apply to a resource
                  properties:
                    kind:
                      description: Type of this condition. At most one of each condition
                        type may apply to a resource at any point in time.
                      type: string
                    lastTransitionTime:
                      description: LastTransitionTime is the last time this condition
                        transitioned from one status to another.
                      format: date-time
                      type: string
                    message:
                      description: A Message containing details about this condition's
                        last transition from one status to another, if any.
                      type: string
                    reason:
                      description: A Reason for this condition's last transition from
                        one status to another.
                      type: string
                    status:
                      description: Status of this condition; is it currently True,
                        False, or Unknown?
                      type: string
                  required:
                  - kind
                  - lastTransitionTime
                  - reason
                  - status
                  type: object
                type: array
              expiryTime:
                description: expiryTime indicated when the allocation expires
                type: string
              gateway:
                description: Gateway identifies the gatway IP for the network
                type: string
              prefix:
                description: AllocatedPrefix identifies the prefix that was allocated
                  by the IPAM system
                type: string
            type: object
        type: object
    served: true
    storage: true
    subresources:
      status: {}
